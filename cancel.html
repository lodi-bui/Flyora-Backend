<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Há»§y Thanh ToÃ¡n</title>
  <style>
    body { font-family: sans-serif; padding: 40px; text-align: center; }
    .status { font-size: 1.5rem; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>ğŸ›‘ Há»§y Thanh ToÃ¡n</h1>
  <p>Äang xá»­ lÃ½ há»§y Ä‘Æ¡n hÃ ng...</p>
  <div class="status" id="status"></div>

  <script>
    (async () => {
      const params = new URLSearchParams(window.location.search);
      const orderCode = params.get("orderCode");

      if (!orderCode) {
        document.getElementById("status").textContent = "âŒ Thiáº¿u orderCode trong URL.";
        return;
      }

      try {
        const response = await fetch(`http://localhost:8080/api/v1/payment/cancel?orderCode=${orderCode}`);
        const result = await response.json();

        if (response.ok && result.status === "CANCELLED") {
          document.getElementById("status").textContent = `ÄÃ£ há»§y Ä‘Æ¡n hÃ ng #${result.orderCode}.`;
        } else if (result.status === "PAID") {
          document.getElementById("status").textContent = `ÄÆ¡n hÃ ng Ä‘Ã£ Ä‘Æ°á»£c thanh toÃ¡n, khÃ´ng thá»ƒ há»§y.`;
        } else {
          document.getElementById("status").textContent = `KhÃ´ng thá»ƒ há»§y Ä‘Æ¡n hÃ ng: ${result.message || 'KhÃ´ng xÃ¡c Ä‘á»‹nh'}`;
        }
      } catch (error) {
        console.error(error);
        document.getElementById("status").textContent = "Lá»—i há»‡ thá»‘ng khi xá»­ lÃ½ yÃªu cáº§u.";
      }
    })();
  </script>
</body>
</html>
